
[
  [
    range: [1x1 1x2]
    nested: 
    [
      [
        range: [1x1 1x3]
        type: string!
        upper: [1x1 1x2]
        error: [code only-opened at 1x2]
      ]
    ]
    source: {"}
    lines: [
      {"}
      1
    ]
  ]
]

[
  [
    range: [1x1 1x9]
    nested: 
    [
      [
        expr: #"^@"
        range: [1x1 1x9]
        type: char!
        upper: [1x1 1x9]
      ]
    ]
    source: {#"^^(00)"}
    lines: [
      {#"^^(00)"}
      1
    ]
  ]
]

[
  [
    range: [1x1 1x8]
    nested: 
    [
      [
        range: [1x1 1x8]
        type: char!
        upper: [1x1 1x8]
        error: not-closed
      ]
    ]
    source: {#"^^(00)}
    lines: [
      {#"^^(00)}
      1
    ]
  ]
]

[
  [
    range: [1x1 1x11]
    nested: 
    [
      [
        range: [1x1 1x11]
        type: char!
        upper: [1x1 1x11]
        error: invalid
      ]
    ]
    source: {#"^^(00) a
    lines: [
      {#"^^(00) a
      1
    ]
  ]
]

[
  [
    range: [1x1 1x6]
    nested: 
    [
      [
        expr: "abc"
        range: [1x1 1x6]
        type: string!
        upper: [1x1 1x6]
      ]
    ]
    source: {"abc"}
    lines: [
      {"abc"}
      1
    ]
  ]
]

[
  [
    range: [1x1 1x5]
    nested: 
    [
      [
        range: [1x1 1x6]
        type: string!
        upper: [1x1 1x5]
        error: [code only-opened at 1x5]
      ]
    ]
    source: {"abc}
    lines: [
      {"abc}
      1
    ]
  ]
]

[
  [
    range: [1x1 2x2]
    nested: 
    [
      [
        range: [1x1 2x1]
        type: string!
        upper: [1x1 2x2]
        error: [code only-opened at 1x5]
      ]
      [
        range: [2x1 2x3]
        type: string!
        upper: [1x1 2x2]
        error: [code only-opened at 1x2]
      ]
    ]
    source: {"abc^/"}
    lines: [
      {"abc^/"}
      1
      6
    ]
  ]
]

[
  [
    range: [1x1 1x3]
    nested: 
    [
      [
        range: [1x1 1x3]
        type: block!
        upper: [1x1 1x3]
      ]
    ]
    source: "[]"
    lines: [
      "[]"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x2]
    nested: 
    [
      [
        range: [1x1 1x2]
        type: block!
        upper: [1x1 1x2]
        error: only-opened
      ]
    ]
    source: "["
    lines: [
      "["
      1
    ]
  ]
]

[
  [
    range: [1x1 1x2]
    nested: 
    [
      [
        range: [1x1 1x2]
        type: block!
        upper: [1x1 1x2]
        error: only-closed
      ]
    ]
    source: "]"
    lines: [
      "]"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x3]
        type: block!
        upper: [1x1 1x4]
      ]
      [
        range: [1x3 1x4]
        type: block!
        upper: [1x1 1x4]
        error: only-opened
      ]
    ]
    source: "[]["
    lines: [
      "[]["
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x3]
        type: block!
        upper: [1x1 1x4]
      ]
      [
        range: [1x3 1x4]
        type: block!
        upper: [1x1 1x4]
        error: only-closed
      ]
    ]
    source: "[]]"
    lines: [
      "[]]"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x4]
        type: block!
        nested: 
        [
          [
            range: [1x2 1x4]
            type: block!
            upper: [1x1 1x4]
          ]
        ]
        upper: [1x1 1x4]
        error: only-opened
      ]
    ]
    source: "[[]"
    lines: [
      "[[]"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x2]
        type: block!
        upper: [1x1 1x4]
        error: only-closed
      ]
      [
        range: [1x2 1x4]
        type: block!
        upper: [1x1 1x4]
      ]
    ]
    source: "][]"
    lines: [
      "][]"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x5]
    nested: 
    [
      [
        range: [1x1 1x5]
        type: block!
        nested: 
        [
          [
            range: [1x2 1x4]
            type: block!
            upper: [1x1 1x5]
          ]
        ]
        upper: [1x1 1x5]
      ]
    ]
    source: "[[]]"
    lines: [
      "[[]]"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x3]
    nested: 
    [
      [
        range: [1x1 1x3]
        type: paren!
        upper: [1x1 1x3]
      ]
    ]
    source: "()"
    lines: [
      "()"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x2]
    nested: 
    [
      [
        range: [1x1 1x2]
        type: paren!
        upper: [1x1 1x2]
        error: only-opened
      ]
    ]
    source: "("
    lines: [
      "("
      1
    ]
  ]
]

[
  [
    range: [1x1 1x2]
    nested: 
    [
      [
        range: [1x1 1x2]
        type: paren!
        upper: [1x1 1x2]
        error: only-closed
      ]
    ]
    source: ")"
    lines: [
      ")"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x3]
        type: paren!
        upper: [1x1 1x4]
      ]
      [
        range: [1x3 1x4]
        type: paren!
        upper: [1x1 1x4]
        error: only-opened
      ]
    ]
    source: "()("
    lines: [
      "()("
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x3]
        type: paren!
        upper: [1x1 1x4]
      ]
      [
        range: [1x3 1x4]
        type: paren!
        upper: [1x1 1x4]
        error: only-closed
      ]
    ]
    source: "())"
    lines: [
      "())"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x4]
        type: paren!
        nested: 
        [
          [
            range: [1x2 1x4]
            type: paren!
            upper: [1x1 1x4]
          ]
        ]
        upper: [1x1 1x4]
        error: only-opened
      ]
    ]
    source: "(()"
    lines: [
      "(()"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x2]
        type: paren!
        upper: [1x1 1x4]
        error: only-closed
      ]
      [
        range: [1x2 1x4]
        type: paren!
        upper: [1x1 1x4]
      ]
    ]
    source: ")()"
    lines: [
      ")()"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x5]
    nested: 
    [
      [
        range: [1x1 1x5]
        type: paren!
        nested: 
        [
          [
            range: [1x2 1x4]
            type: paren!
            upper: [1x1 1x5]
          ]
        ]
        upper: [1x1 1x5]
      ]
    ]
    source: "(())"
    lines: [
      "(())"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x3]
    nested: 
    [
      [
        expr: ""
        range: [1x1 1x3]
        type: string!
        upper: [1x1 1x3]
      ]
    ]
    source: "{}"
    lines: [
      "{}"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x2]
    nested: 
    [
      [
        range: [1x1 1x2]
        type: string!
        upper: [1x1 1x2]
        error: [code only-opened at 1x2]
      ]
    ]
    source: "{"
    lines: [
      "{"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x2]
    nested: 
    [
      [
        range: [1x1 1x2]
        type: string!
        upper: [1x1 1x2]
        error: only-closed
      ]
    ]
    source: "}"
    lines: [
      "}"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        expr: ""
        range: [1x1 1x3]
        type: string!
        upper: [1x1 1x4]
      ]
      [
        range: [1x3 1x4]
        type: string!
        upper: [1x1 1x4]
        error: [code only-opened at 1x2]
      ]
    ]
    source: "{}{"
    lines: [
      "{}{"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        expr: ""
        range: [1x1 1x3]
        type: string!
        upper: [1x1 1x4]
      ]
      [
        range: [1x3 1x4]
        type: string!
        upper: [1x1 1x4]
        error: only-closed
      ]
    ]
    source: "{}}"
    lines: [
      "{}}"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x3]
        type: string!
        upper: [1x1 1x4]
        error: [code only-opened at 3x3]
      ]
      [
        range: [1x3 1x4]
        type: string!
        upper: [1x1 1x4]
        error: only-closed
      ]
    ]
    source: "{{}"
    lines: [
      "{{}"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x2]
        type: string!
        upper: [1x1 1x4]
        error: only-closed
      ]
      [
        expr: ""
        range: [1x2 1x4]
        type: string!
        upper: [1x1 1x4]
      ]
    ]
    source: "}{}"
    lines: [
      "}{}"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x5]
    nested: 
    [
      [
        expr: "{}"
        range: [1x1 1x5]
        type: string!
        upper: [1x1 1x5]
      ]
    ]
    source: "{{}}"
    lines: [
      "{{}}"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x3]
    nested: 
    [
      [
        range: [1x1 1x3]
        type: string!
        upper: [1x1 1x3]
        error: [code only-opened at 1x3]
      ]
    ]
    source: "{{"
    lines: [
      "{{"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x4]
        type: string!
        upper: [1x1 1x4]
        error: [code only-opened at 1x4]
      ]
    ]
    source: "{{{"
    lines: [
      "{{{"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x3]
    nested: 
    [
      [
        range: [1x1 1x3]
        type: path!
        nested: 
        [
          [
            expr: a
            range: [1x1 1x2]
            type: word!
            upper: [1x1 1x3]
          ]
        ]
        upper: [1x1 1x3]
        error: slash
      ]
    ]
    source: "a/"
    lines: [
      "a/"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x3]
        type: path!
        nested: 
        [
          [
            expr: a
            range: [1x1 1x2]
            type: word!
            upper: [1x1 1x3]
          ]
        ]
        upper: [1x1 1x4]
        error: slash
      ]
    ]
    source: "a/ "
    lines: [
      "a/ "
      1
    ]
  ]
]

[
  [
    range: [1x1 1x4]
    nested: 
    [
      [
        range: [1x1 1x4]
        type: path!
        nested: 
        [
          [
            expr: a
            range: [1x1 1x2]
            type: word!
            upper: [1x1 1x4]
          ]
          [
            expr: b
            range: [1x3 1x4]
            type: word!
            upper: [1x1 1x4]
          ]
        ]
        upper: [1x1 1x4]
      ]
    ]
    source: "a/b"
    lines: [
      "a/b"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x5]
    nested: 
    [
      [
        range: [1x1 1x5]
        type: path!
        nested: 
        [
          [
            expr: a
            range: [1x1 1x2]
            type: word!
            upper: [1x1 1x5]
          ]
          [
            expr: b
            range: [1x3 1x4]
            type: word!
            upper: [1x1 1x5]
          ]
        ]
        upper: [1x1 1x5]
        error: slash
      ]
    ]
    source: "a/b/"
    lines: [
      "a/b/"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x6]
    nested: 
    [
      [
        range: [1x1 1x5]
        type: path!
        nested: 
        [
          [
            expr: a
            range: [1x1 1x2]
            type: word!
            upper: [1x1 1x5]
          ]
          [
            expr: b
            range: [1x3 1x4]
            type: word!
            upper: [1x1 1x5]
          ]
        ]
        upper: [1x1 1x6]
        error: slash
      ]
    ]
    source: "a/b/ "
    lines: [
      "a/b/ "
      1
    ]
  ]
]

[
  [
    range: [1x1 1x6]
    nested: 
    [
      [
        range: [1x1 1x6]
        type: path!
        nested: 
        [
          [
            expr: a
            range: [1x1 1x2]
            type: word!
            upper: [1x1 1x6]
          ]
          [
            expr: b
            range: [1x3 1x4]
            type: word!
            upper: [1x1 1x6]
          ]
        ]
        upper: [1x1 1x6]
        error: [code slash-get type word!]
      ]
    ]
    source: "a/b/:"
    lines: [
      "a/b/:"
      1
    ]
  ]
]

[
  [
    range: [1x1 1x7]
    nested: 
    [
      [
        range: [1x1 1x6]
        type: path!
        nested: 
        [
          [
            expr: a
            range: [1x1 1x2]
            type: word!
            upper: [1x1 1x6]
          ]
          [
            expr: b
            range: [1x3 1x4]
            type: word!
            upper: [1x1 1x6]
          ]
        ]
        upper: [1x1 1x7]
        error: [code slash-get type word!]
      ]
    ]
    source: "a/b/: "
    lines: [
      "a/b/: "
      1
    ]
  ]
]
