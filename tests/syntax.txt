PS D:\vscode-ext\VScode-extension\server> ./red.exe --cli .\tests\red-test.red

[
  #(
    range: [1 1 73 1]
    expr:
    [
      #(
        range: [1 1 1 4]
        expr: Red
        depth: 1
        syntax: #(
          name: keyword-value
          step: 1
          meta: 1
          word: Red
        )
      )
      #(
        range: [1 5 1 8]
        expr: he:
        depth: 1
        syntax: #(
          name: set
          step: 2
          error: #(severity: 1 code: "miss-expr" source: "Syntax" message: "he: -- need a type: block! for Red File header")
          meta: 2
          cast: [1 9 1 11]
        )
      )
      #(
        range: [1 9 1 11]
        expr: []
        depth: 1
        syntax: #(
          name: block
          step: 1
        )
      )
      #(
        range: [3 1 3 3]
        expr: a:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [3 4 3 9]
        )
      )
      #(
        range: [3 4 3 9]
        expr: 'test
        depth: 1
        syntax: #(
          name: literal
          step: 1
        )
      )
      #(
        range: [4 1 4 3]
        expr: b:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [4 4 4 11]
        )
      )
      #(
        range: [4 4 4 11]
        expr: context
        depth: 1
        syntax: #(
          name: keyword-context
          step: 2
          word: context
          casts: #(
            spec: [4 12 32 2]
          )
          resolved: #(
            spec: [4 12 32 2]
          )
        )
      )
      #(
        range: [4 12 32 2]
        expr:
        [
          #(
            range: [5 2 5 4]
            expr: c:
            depth: 2
            syntax: #(
              name: set
              step: 2
              cast: [5 5 5 6]
            )
          )
          #(
            range: [5 5 5 6]
            expr: 4
            depth: 2
            syntax: #(
              name: literal
              step: 1
            )
          )
          #(
            range: [6 2 6 4]
            expr: d:
            depth: 2
            syntax: #(
              name: set
              step: 2
              cast: [6 5 6 12]
            )
          )
          #(
            range: [6 5 6 12]
            expr: context
            depth: 2
            syntax: #(
              name: keyword-context
              step: 2
              word: context
              casts: #(
                spec: [6 13 27 3]
              )
              resolved: #(
                spec: [6 13 27 3]
              )
            )
          )
          #(
            range: [6 13 27 3]
            expr:
            [
              #(
                range: [7 3 7 5]
                expr: e:
                depth: 3
                syntax: #(
                  name: set
                  step: 2
                  cast: [7 6 7 11]
                )
              )
              #(
                range: [7 6 7 11]
                expr: #{12}
                depth: 3
                syntax: #(
                  name: literal
                  step: 1
                )
              )
              #(
                range: [8 3 8 5]
                expr: f:
                depth: 3
                syntax: #(
                  name: set
                  step: 2
                  cast: [8 6 8 10]
                )
              )
              #(
                range: [8 6 8 10]
                expr: func
                depth: 3
                syntax: #(
                  name: keyword-func
                  step: 3
                  word: func
                  casts: #(
                    spec: [8 11 8 36]
                    body: [8 36 25 4]
                  )
                  resolved: #(
                    spec: [8 11 8 36]
                    body: [8 36 25 4]
                  )
                )
              )
              #(
                range: [8 11 8 36]
                expr:
                [
                  #(
                    range: [8 12 8 13]
                    expr: x
                    depth: 4
                    syntax: #(
                      name: func-param
                      args: #(
                        type: [8 14 8 22]
                      )
                    )
                  )
                  #(
                    range: [8 14 8 22]
                    expr:
                    [
                      #(
                        range: [8 15 8 21]
                        expr: block!
                        depth: 5
                        syntax: #(
                          name: func-type-item
                        )
                      )
                    ]
                    depth: 4
                    syntax: #(
                      name: func-type
                      parent: [8 12 8 13]
                      args: #(
                        types: [block!]
                      )
                    )
                  )
                  #(
                    range: [8 23 8 24]
                    expr: y
                    depth: 4
                    syntax: #(
                      name: func-param
                      args: #(
                        type: [8 25 8 35]
                      )
                    )
                  )
                  #(
                    range: [8 25 8 35]
                    expr:
                    [
                      #(
                        range: [8 26 8 34]
                        expr: integer!
                        depth: 5
                        syntax: #(
                          name: func-type-item
                        )
                      )
                    ]
                    depth: 4
                    syntax: #(
                      name: func-type
                      parent: [8 23 8 24]
                      args: #(
                        types: [integer!]
                      )
                    )
                  )
                ]
                depth: 3
                syntax: #(
                  name: block
                  step: 1
                )
              )
              #(
                range: [8 36 25 4]
                expr:
                [
                  #(
                    range: [9 4 9 7]
                    expr: ff:
                    depth: 4
                    syntax: #(
                      name: set
                      step: 2
                      cast: [9 8 9 16]
                    )
                  )
                  #(
                    range: [9 8 9 16]
                    expr: function
                    depth: 4
                    syntax: #(
                      name: keyword-function
                      step: 3
                      word: function
                      casts: #(
                        spec: [9 17 9 43]
                        body: [9 43 18 5]
                      )
                      resolved: #(
                        spec: [9 17 9 43]
                        body: [9 43 18 5]
                      )
                    )
                  )
                  #(
                    range: [9 17 9 43]
                    expr:
                    [
                      #(
                        range: [9 18 9 19]
                        expr: a
                        depth: 5
                        syntax: #(
                          name: func-param
                          args: #(
                            type: [9 20 9 30]
                          )
                        )
                      )
                      #(
                        range: [9 20 9 30]
                        expr:
                        [
                          #(
                            range: [9 21 9 29]
                            expr: integer!
                            depth: 6
                            syntax: #(
                              name: func-type-item
                            )
                          )
                        ]
                        depth: 5
                        syntax: #(
                          name: func-type
                          parent: [9 18 9 19]
                          args: #(
                            types: [integer!]
                          )
                        )
                      )
                      #(
                        range: [9 31 9 32]
                        expr: b
                        depth: 5
                        syntax: #(
                          name: func-param
                          args: #(
                            type: [9 33 9 42]
                          )
                        )
                      )
                      #(
                        range: [9 33 9 42]
                        expr:
                        [
                          #(
                            range: [9 34 9 41]
                            expr: binary!
                            depth: 6
                            syntax: #(
                              name: func-type-item
                            )
                          )
                        ]
                        depth: 5
                        syntax: #(
                          name: func-type
                          parent: [9 31 9 32]
                          args: #(
                            types: [binary!]
                          )
                        )
                      )
                    ]
                    depth: 4
                    syntax: #(
                      name: block
                      step: 1
                    )
                  )
                  #(
                    range: [9 43 18 5]
                    expr:
                    [
                      #(
                        range: [10 5 10 8]
                        expr: f1:
                        depth: 5
                        syntax: #(
                          name: set
                          step: 2
                          cast: [10 9 10 15]
                        )
                      )
                      #(
                        range: [10 9 10 15]
                        expr: "test"
                        depth: 5
                        syntax: #(
                          name: literal
                          step: 1
                        )
                      )
                      #(
                        range: [11 5 11 8]
                        expr: f2:
                        depth: 5
                        syntax: #(
                          name: set
                          step: 2
                          cast: [11 9 11 10]
                        )
                      )
                      #(
                        range: [11 9 11 10]
                        expr: x
                        depth: 5
                        syntax: #(
                          name: refer
                          step: 1
                          refer: [8 12 8 13]
                          word: x
                        )
                      )
                      #(
                        range: [12 5 12 8]
                        expr: f3:
                        depth: 5
                        syntax: #(
                          name: set
                          step: 2
                          cast: [12 9 12 11]
                        )
                      )
                      #(
                        range: [12 9 12 11]
                        expr: f1
                        depth: 5
                        syntax: #(
                          name: refer
                          step: 1
                          refer: [10 5 10 8]
                          value: [10 9 10 15]
                          word: f1
                        )
                      )
                      #(
                        range: [13 5 13 8]
                        expr: f4:
                        depth: 5
                        syntax: #(
                          name: set
                          step: 2
                          cast: [13 9 13 10]
                        )
                      )
                      #(
                        range: [13 9 13 10]
                        expr: l
                        depth: 5
                        syntax: #(
                          name: refer
                          step: 1
                          refer: [34 1 34 3]
                          value: [34 4 34 15]
                          word: l
                        )
                      )
                      #(
                        range: [14 5 14 8]
                        expr: f5:
                        depth: 5
                        syntax: #(
                          name: set
                          step: 2
                          cast: [14 9 14 11]
                        )
                      )
                      #(
                        range: [14 9 14 11]
                        expr: :f
                        depth: 5
                        syntax: #(
                          name: get
                          step: 1
                          refer: [8 3 8 5]
                          value: [8 6 8 10]
                        )
                      )
                      #(
                        range: [15 5 15 8]
                        expr: f6:
                        depth: 5
                        syntax: #(
                          name: set
                          step: 2
                          cast: [15 9 15 11]
                        )
                      )
                      #(
                        range: [15 9 15 11]
                        expr: f5
                        depth: 5
                        syntax: #(
                          name: refer
                          step: 1
                          refer: [8 3 8 5]
                          value: [8 6 8 10]
                          word: f5
                        )
                      )
                      #(
                        range: [16 5 16 8]
                        expr: f7:
                        depth: 5
                        syntax: #(
                          name: set
                          step: 2
                          cast: [16 9 16 10]
                        )
                      )
                      #(
                        range: [16 9 16 10]
                        expr: a
                        depth: 5
                        syntax: #(
                          name: refer
                          step: 1
                          refer: [9 18 9 19]
                          word: a
                        )
                      )
                      #(
                        range: [16 11 16 12]
                        expr: +
                        depth: 5
                        syntax: #(
                          name: unknown-keyword
                          step: 1
                          word: +
                        )
                      )
                      #(
                        range: [16 13 16 20]
                        expr: length?
                        depth: 5
                        syntax: #(
                          name: unknown-keyword
                          step: 1
                          word: length?
                        )
                      )
                      #(
                        range: [16 21 16 22]
                        expr: b
                        depth: 5
                        syntax: #(
                          name: refer
                          step: 1
                          refer: [9 31 9 32]
                          word: b
                        )
                      )
                      #(
                        range: [17 5 17 6]
                        expr: f
                        depth: 5
                        syntax: #(
                          name: refer
                          step: 1
                          refer: [8 3 8 5]
                          value: [8 6 8 10]
                          word: f
                        )
                      )
                    ]
                    depth: 4
                    syntax: #(
                      name: block
                      step: 1
                      into: true
                    )
                  )
                  #(
                    range: [19 4 19 6]
                    expr: x:
                    depth: 4
                    syntax: #(
                      name: set
                      step: 2
                      cast: [19 7 19 8]
                      refer: [8 12 8 13]
                    )
                  )
                  #(
                    range: [19 7 19 8]
                    expr: 1
                    depth: 4
                    syntax: #(
                      name: literal
                      step: 1
                    )
                  )
                  #(
                    range: [20 4 20 6]
                    expr: y:
                    depth: 4
                    syntax: #(
                      name: set
                      step: 2
                      cast: [20 7 20 8]
                      refer: [8 23 8 24]
                    )
                  )
                  #(
                    range: [20 7 20 8]
                    expr: 1
                    depth: 4
                    syntax: #(
                      name: literal
                      step: 1
                    )
                  )
                  #(
                    range: [21 4 21 6]
                    expr: e:
                    depth: 4
                    syntax: #(
                      name: set
                      step: 2
                      cast: [21 7 21 8]
                      refer: [7 3 7 5]
                      value: [7 6 7 11]
                    )
                  )
                  #(
                    range: [21 7 21 8]
                    expr: x
                    depth: 4
                    syntax: #(
                      name: refer
                      step: 1
                      refer: [8 12 8 13]
                      word: x
                    )
                  )
                  #(
                    range: [21 9 21 10]
                    expr: +
                    depth: 4
                    syntax: #(
                      name: unknown-keyword
                      step: 1
                      word: +
                    )
                  )
                  #(
                    range: [21 11 21 12]
                    expr: y
                    depth: 4
                    syntax: #(
                      name: refer
                      step: 1
                      refer: [8 23 8 24]
                      word: y
                    )
                  )
                  #(
                    range: [22 4 22 6]
                    expr: o:
                    depth: 4
                    syntax: #(
                      name: set
                      step: 2
                      cast: [22 7 22 8]
                      refer: [34 1 34 3]
                      value: [34 4 34 15]
                    )
                  )
                  #(
                    range: [22 7 22 8]
                    expr: g
                    depth: 4
                    syntax: #(
                      name: refer
                      step: 1
                      refer: [26 3 26 5]
                      value: [26 6 26 8]
                      word: g
                    )
                  )
                  #(
                    range: [23 4 23 6]
                    expr: t:
                    depth: 4
                    syntax: #(
                      name: set
                      step: 2
                      cast: [23 7 23 8]
                    )
                  )
                  #(
                    range: [23 7 23 8]
                    expr: h
                    depth: 4
                    syntax: #(
                      name: refer
                      step: 1
                      refer: [28 2 28 4]
                      value: [28 5 28 12]
                      word: h
                    )
                  )
                  #(
                    range: [24 4 24 6]
                    expr: u:
                    depth: 4
                    syntax: #(
                      name: set
                      step: 2
                      cast: [24 7 24 8]
                    )
                  )
                  #(
                    range: [24 7 24 8]
                    expr: x
                    depth: 4
                    syntax: #(
                      name: refer
                      step: 1
                      refer: [8 12 8 13]
                      word: x
                    )
                  )
                ]
                depth: 3
                syntax: #(
                  name: block
                  step: 1
                  into: true
                )
              )
              #(
                range: [26 3 26 5]
                expr: g:
                depth: 3
                syntax: #(
                  name: set
                  step: 2
                  cast: [26 6 26 8]
                )
              )
              #(
                range: [26 6 26 8]
                expr: []
                depth: 3
                syntax: #(
                  name: block
                  step: 1
                )
              )
            ]
            depth: 2
            syntax: #(
              name: block
              step: 1
              into: true
            )
          )
          #(
            range: [28 2 28 4]
            expr: h:
            depth: 2
            syntax: #(
              name: set
              step: 2
              cast: [28 5 28 12]
            )
          )
          #(
            range: [28 5 28 12]
            expr: #(a: 3)
            depth: 2
            syntax: #(
              name: literal
              step: 1
            )
          )
          #(
            range: [29 2 29 4]
            expr: i:
            depth: 2
            syntax: #(
              name: set
              step: 2
              cast: [29 5 29 6]
            )
          )
          #(
            range: [29 5 29 6]
            expr: x
            depth: 2
            syntax: #(
              name: unknown
              step: 1
              word: x
            )
          )
          #(
            range: [30 2 30 4]
            expr: j:
            depth: 2
            syntax: #(
              name: set
              step: 2
              cast: [30 5 30 6]
            )
          )
          #(
            range: [30 5 30 6]
            expr: e
            depth: 2
            syntax: #(
              name: keyword-value
              step: 1
              word: e
            )
          )
          #(
            range: [31 2 31 4]
            expr: k:
            depth: 2
            syntax: #(
              name: set
              step: 2
              cast: [31 5 31 6]
            )
          )
          #(
            range: [31 5 31 6]
            expr: t
            depth: 2
            syntax: #(
              name: unknown
              step: 1
              word: t
            )
          )
        ]
        depth: 1
        syntax: #(
          name: block
          step: 1
          into: true
        )
      )
      #(
        range: [34 1 34 3]
        expr: l:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [34 4 34 15]
        )
      )
      #(
        range: [34 4 34 15]
        expr:
        (
          #(
            range: [34 5 34 7]
            expr: m:
            depth: 2
            syntax: #(
              name: set
              step: 2
              cast: [34 8 34 9]
            )
          )
          #(
            range: [34 8 34 9]
            expr: 3
            depth: 2
            syntax: #(
              name: literal
              step: 1
            )
          )
          #(
            range: [34 10 34 12]
            expr: n:
            depth: 2
            syntax: #(
              name: set
              step: 2
              cast: [34 13 34 14]
            )
          )
          #(
            range: [34 13 34 14]
            expr: a
            depth: 2
            syntax: #(
              name: refer
              step: 1
              refer: [3 1 3 3]
              value: [3 4 3 9]
              word: a
            )
          )
        )
        depth: 1
        syntax: #(
          name: paren
          step: 1
        )
      )
      #(
        range: [35 1 35 3]
        expr: o:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [35 4 35 5]
        )
      )
      #(
        range: [35 4 35 5]
        expr: l
        depth: 1
        syntax: #(
          name: refer
          step: 1
          refer: [34 1 34 3]
          value: [34 4 34 15]
          word: l
        )
      )
      #(
        range: [37 1 37 3]
        expr: r:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [37 4 37 8]
        )
      )
      #(
        range: [37 4 37 8]
        expr: func
        depth: 1
        syntax: #(
          name: keyword-func
          step: 3
          word: func
          casts: #(
            spec: [37 9 42 2]
            body: [42 2 45 2]
          )
          resolved: #(
            spec: [37 9 42 2]
            body: [42 2 45 2]
          )
        )
      )
      #(
        range: [37 9 42 2]
        expr:
        [
          #(
            range: [38 2 38 3]
            expr: a
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                type: [38 4 38 10]
              )
            )
          )
          #(
            range: [38 4 38 10]
            expr:
            [
              #(
                range: [38 5 38 9]
                expr: test
                depth: 3
                syntax: #(
                  name: func-type-item
                  error: #(severity: 1 code: "invalid-datatype" source: "Syntax" message: "test -- invalid datatype: test")
                )
              )
            ]
            depth: 2
            syntax: #(
              name: func-type
              parent: [38 2 38 3]
              args: #(
                types: []
              )
            )
          )
          #(
            range: [39 2 39 3]
            expr: b
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                type: [39 4 39 11]
              )
            )
          )
          #(
            range: [39 4 39 11]
            expr:
            [
              #(
                range: [39 5 39 10]
                expr: test!
                depth: 3
                syntax: #(
                  name: func-type-item
                  error: #(severity: 1 code: "invalid-datatype" source: "Syntax" message: "test! -- invalid datatype: test!")
                )
              )
            ]
            depth: 2
            syntax: #(
              name: func-type
              parent: [39 2 39 3]
              args: #(
                types: []
              )
            )
          )
          #(
            range: [40 2 40 9]
            expr: return:
            depth: 2
            syntax: #(
              name: func-return
              args: #(
                type: [40 10 40 18]
              )
            )
          )
          #(
            range: [40 10 40 18]
            expr:
            [
              #(
                range: [40 11 40 17]
                expr: block!
                depth: 3
                syntax: #(
                  name: func-type-item
                )
              )
            ]
            depth: 2
            syntax: #(
              name: func-type
              parent: [40 2 40 9]
              args: #(
                types: [block!]
              )
            )
          )
          #(
            range: [40 19 40 27]
            expr: ";--tests"
            depth: 2
            syntax: #(
              name: none
            )
          )
          #(
            range: [41 2 41 8]
            expr: /local
            depth: 2
            syntax: #(
              name: func-refinement
              args: #(
                types: [
                  [41 9 41 10]
                  [41 11 41 12]
                  [41 11 41 12]
                ]
              )
            )
          )
          #(
            range: [41 9 41 10]
            expr: x
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                refs: [41 2 41 8]
              )
            )
          )
          #(
            range: [41 11 41 12]
            expr: y
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                refs: [41 2 41 8]
              )
            )
          )
        ]
        depth: 1
        syntax: #(
          name: block
          step: 1
        )
      )
      #(
        range: [42 2 45 2]
        expr:
        [
          #(
            range: [43 2 43 4]
            expr: x:
            depth: 2
            syntax: #(
              name: set
              step: 2
              cast: [43 5 43 6]
              refer: [41 9 41 10]
            )
          )
          #(
            range: [43 5 43 6]
            expr: 1
            depth: 2
            syntax: #(
              name: literal
              step: 1
            )
          )
          #(
            range: [43 7 43 9]
            expr: y:
            depth: 2
            syntax: #(
              name: set
              step: 2
              cast: [43 10 43 11]
              refer: [41 11 41 12]
            )
          )
          #(
            range: [43 10 43 11]
            expr: 1
            depth: 2
            syntax: #(
              name: literal
              step: 1
            )
          )
          #(
            range: [44 2 44 3]
            expr: a
            depth: 2
            syntax: #(
              name: refer
              step: 1
              refer: [38 2 38 3]
              word: a
            )
          )
          #(
            range: [44 4 44 5]
            expr: +
            depth: 2
            syntax: #(
              name: unknown-keyword
              step: 1
              word: +
            )
          )
          #(
            range: [44 6 44 7]
            expr: b
            depth: 2
            syntax: #(
              name: refer
              step: 1
              refer: [39 2 39 3]
              word: b
            )
          )
          #(
            range: [44 8 44 9]
            expr: +
            depth: 2
            syntax: #(
              name: unknown-keyword
              step: 1
              word: +
            )
          )
          #(
            range: [44 10 44 11]
            expr: 1
            depth: 2
            syntax: #(
              name: literal
              step: 1
            )
          )
          #(
            range: [44 12 44 13]
            expr: +
            depth: 2
            syntax: #(
              name: unknown-keyword
              step: 1
              word: +
            )
          )
          #(
            range: [44 14 44 15]
            expr: 1
            depth: 2
            syntax: #(
              name: literal
              step: 1
            )
          )
        ]
        depth: 1
        syntax: #(
          name: block
          step: 1
          into: true
        )
      )
      #(
        range: [47 1 47 3]
        expr: s:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [47 4 47 12]
        )
      )
      #(
        range: [47 4 47 12]
        expr: function
        depth: 1
        syntax: #(
          name: keyword-function
          step: 3
          word: function
          casts: #(
            spec: [47 13 47 56]
            body: [47 56 53 2]
          )
          resolved: #(
            spec: [47 13 47 56]
            body: [47 56 53 2]
          )
        )
      )
      #(
        range: [47 13 47 56]
        expr:
        [
          #(
            range: [47 14 47 17]
            expr: uri
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                type: [47 18 47 27]
              )
            )
          )
          #(
            range: [47 18 47 27]
            expr:
            [
              #(
                range: [47 19 47 26]
                expr: string!
                depth: 3
                syntax: #(
                  name: func-type-item
                )
              )
            ]
            depth: 2
            syntax: #(
              name: func-type
              parent: [47 14 47 17]
              args: #(
                types: [string!]
              )
            )
          )
          #(
            range: [47 28 47 32]
            expr: code
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                type: [47 33 47 42]
              )
            )
          )
          #(
            range: [47 33 47 42]
            expr:
            [
              #(
                range: [47 34 47 41]
                expr: string!
                depth: 3
                syntax: #(
                  name: func-type-item
                )
              )
            ]
            depth: 2
            syntax: #(
              name: func-type
              parent: [47 28 47 32]
              args: #(
                types: [string!]
              )
            )
          )
          #(
            range: [47 43 47 46]
            expr: blk
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                type: [47 47 47 55]
              )
            )
          )
          #(
            range: [47 47 47 55]
            expr:
            [
              #(
                range: [47 48 47 54]
                expr: block!
                depth: 3
                syntax: #(
                  name: func-type-item
                )
              )
            ]
            depth: 2
            syntax: #(
              name: func-type
              parent: [47 43 47 46]
              args: #(
                types: [block!]
              )
            )
          )
        ]
        depth: 1
        syntax: #(
          name: block
          step: 1
        )
      )
      #(
        range: [47 56 53 2]
        expr:
        [
          #(
            range: [48 2 48 8]
            expr: either
            depth: 2
            syntax: #(
              name: unknown-keyword
              step: 1
              word: either
            )
          )
          #(
            range: [48 9 48 12]
            expr: uri
            depth: 2
            syntax: #(
              name: refer
              step: 1
              refer: [47 14 47 17]
              word: uri
            )
          )
          #(
            range: [48 13 50 3]
            expr:
            [
              #(
                range: [49 3 49 9]
                expr: return
                depth: 3
                syntax: #(
                  name: none
                )
              )
              #(
                range: [49 10 49 16]
                expr: reduce
                depth: 3
                syntax: #(
                  name: none
                )
              )
              #(
                range: [49 17 49 31]
                expr:
                [
                  #(
                    range: [49 18 49 21]
                    expr: uri
                    depth: 4
                    syntax: #(
                      name: none
                    )
                  )
                  #(
                    range: [49 22 49 26]
                    expr: code
                    depth: 4
                    syntax: #(
                      name: none
                    )
                  )
                  #(
                    range: [49 27 49 30]
                    expr: blk
                    depth: 4
                    syntax: #(
                      name: none
                    )
                  )
                ]
                depth: 3
                syntax: #(
                  name: none
                )
              )
            ]
            depth: 2
            syntax: #(
              name: block
              step: 1
            )
          )
          #(
            range: [50 3 52 3]
            expr:
            [
              #(
                range: [51 3 51 9]
                expr: return
                depth: 3
                syntax: #(
                  name: none
                )
              )
              #(
                range: [51 10 51 16]
                expr: reduce
                depth: 3
                syntax: #(
                  name: none
                )
              )
              #(
                range: [51 17 51 31]
                expr:
                [
                  #(
                    range: [51 18 51 21]
                    expr: uri
                    depth: 4
                    syntax: #(
                      name: none
                    )
                  )
                  #(
                    range: [51 22 51 26]
                    expr: code
                    depth: 4
                    syntax: #(
                      name: none
                    )
                  )
                  #(
                    range: [51 27 51 30]
                    expr: blk
                    depth: 4
                    syntax: #(
                      name: none
                    )
                  )
                ]
                depth: 3
                syntax: #(
                  name: none
                )
              )
            ]
            depth: 2
            syntax: #(
              name: block
              step: 1
            )
          )
        ]
        depth: 1
        syntax: #(
          name: block
          step: 1
          into: true
        )
      )
      #(
        range: [55 1 55 5]
        expr: fff:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [55 6 55 7]
        )
      )
      #(
        range: [55 6 55 7]
        expr: 3
        depth: 1
        syntax: #(
          name: literal
          step: 1
        )
      )
      #(
        range: [57 1 57 4]
        expr: ft:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [57 5 57 9]
        )
      )
      #(
        range: [57 5 57 9]
        expr: func
        depth: 1
        syntax: #(
          name: keyword-func
          step: 3
          word: func
          casts: #(
            spec: [57 10 57 104]
            body: [57 104 60 2]
          )
          resolved: #(
            spec: [57 10 57 104]
            body: [57 104 60 2]
          )
        )
      )
      #(
        range: [57 10 57 104]
        expr:
        [
          #(
            range: [57 11 57 12]
            expr: a
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                type: [57 13 57 21]
              )
            )
          )
          #(
            range: [57 13 57 21]
            expr:
            [
              #(
                range: [57 14 57 20]
                expr: block!
                depth: 3
                syntax: #(
                  name: func-type-item
                )
              )
            ]
            depth: 2
            syntax: #(
              name: func-type
              parent: [57 11 57 12]
              args: #(
                types: [block!]
              )
            )
          )
          #(
            range: [57 22 57 23]
            expr: b
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                type: [57 24 57 39]
              )
            )
          )
          #(
            range: [57 24 57 39]
            expr:
            [
              #(
                range: [57 25 57 29]
                expr: map!
                depth: 3
                syntax: #(
                  name: func-type-item
                )
              )
              #(
                range: [57 30 57 38]
                expr: integer!
                depth: 3
                syntax: #(
                  name: func-type-item
                )
              )
            ]
            depth: 2
            syntax: #(
              name: func-type
              parent: [57 22 57 23]
              args: #(
                types: [map! integer!]
              )
            )
          )
          #(
            range: [57 40 57 47]
            expr: return:
            depth: 2
            syntax: #(
              name: func-return
              error: #(severity: 1 code: "invalid-arg" source: "Syntax" message: "return: -- invalid argument for: c")
              args: #(
                type: [57 48 57 58]
              )
            )
          )
          #(
            range: [57 48 57 58]
            expr:
            [
              #(
                range: [57 49 57 57]
                expr: integer!
                depth: 3
                syntax: #(
                  name: func-type-item
                )
              )
            ]
            depth: 2
            syntax: #(
              name: func-type
              parent: [57 40 57 47]
              args: #(
                types: [integer!]
              )
            )
          )
          #(
            range: [57 59 57 60]
            expr: c
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                type: [57 61 57 71]
              )
            )
          )
          #(
            range: [57 61 57 71]
            expr:
            [
              #(
                range: [57 62 57 70]
                expr: integer!
                depth: 3
                syntax: #(
                  name: func-type-item
                )
              )
            ]
            depth: 2
            syntax: #(
              name: func-type
              parent: [57 59 57 60]
              args: #(
                types: [integer!]
              )
            )
          )
          #(
            range: [57 72 57 74]
            expr: /c
            depth: 2
            syntax: #(
              name: func-refinement
              error: #(severity: 1 code: "double-define" source: "Syntax" message: "/c -- double define: c")
              args: #(
                types: [
                  [57 75 57 76]
                  [57 77 57 87]
                  [57 88 57 90]
                  [57 91 57 97]
                  [57 98 57 99]
                  [57 100 57 101]
                  [57 102 57 103]
                ]
              )
            )
          )
          #(
            range: [57 75 57 76]
            expr: a
            depth: 2
            syntax: #(
              name: func-param
              error: #(severity: 1 code: "double-define" source: "Syntax" message: "a -- double define: a")
              args: #(
                refs: [57 72 57 74]
                type: [57 77 57 87]
              )
            )
          )
          #(
            range: [57 77 57 87]
            expr:
            [
              #(
                range: [57 78 57 86]
                expr: integer!
                depth: 3
                syntax: #(
                  name: func-type-item
                )
              )
            ]
            depth: 2
            syntax: #(
              name: func-type
              parent: [57 75 57 76]
              args: #(
                types: [integer!]
              )
            )
          )
          #(
            range: [57 88 57 90]
            expr: /d
            depth: 2
            syntax: #(
              name: func-refinement
              args: #(
                types: [
                ]
              )
            )
          )
          #(
            range: [57 91 57 97]
            expr: /local
            depth: 2
            syntax: #(
              name: func-refinement
              args: #(
                types: [
                  [57 98 57 99]
                  [57 100 57 101]
                  [57 102 57 103]
                  [57 100 57 101]
                  [57 102 57 103]
                  [57 102 57 103]
                ]
              )
            )
          )
          #(
            range: [57 98 57 99]
            expr: x
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                refs: [57 91 57 97]
              )
            )
          )
          #(
            range: [57 100 57 101]
            expr: y
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                refs: [57 91 57 97]
              )
            )
          )
          #(
            range: [57 102 57 103]
            expr: z
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                refs: [57 91 57 97]
              )
            )
          )
        ]
        depth: 1
        syntax: #(
          name: block
          step: 1
        )
      )
      #(
        range: [57 104 60 2]
        expr:
        [
          #(
            range: [58 2 58 8]
            expr: reduce
            depth: 2
            syntax: #(
              name: unknown-keyword
              step: 1
              word: reduce
            )
          )
          #(
            range: [58 9 58 18]
            expr:
            [
              #(
                range: [58 10 58 11]
                expr: a
                depth: 3
                syntax: #(
                  name: none
                )
              )
              #(
                range: [58 12 58 13]
                expr: b
                depth: 3
                syntax: #(
                  name: none
                )
              )
              #(
                range: [58 14 58 15]
                expr: c
                depth: 3
                syntax: #(
                  name: none
                )
              )
              #(
                range: [58 16 58 17]
                expr: d
                depth: 3
                syntax: #(
                  name: none
                )
              )
            ]
            depth: 2
            syntax: #(
              name: block
              step: 1
            )
          )
          #(
            range: [59 2 59 12]
            expr: find/match
            depth: 2
            syntax: #(
              name: unknown-keyword
              step: 1
              word: find
            )
          )
          #(
            range: [59 13 59 18]
            expr: "adb"
            depth: 2
            syntax: #(
              name: literal
              step: 1
            )
          )
          #(
            range: [59 19 59 22]
            expr: "a"
            depth: 2
            syntax: #(
              name: literal
              step: 1
            )
          )
        ]
        depth: 1
        syntax: #(
          name: block
          step: 1
          into: true
        )
      )
      #(
        range: [62 1 62 5]
        expr: fh1:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [62 6 62 9]
        )
      )
      #(
        range: [62 6 62 9]
        expr: has
        depth: 1
        syntax: #(
          name: keyword-has
          step: 4
          error: #(severity: 1 code: "miss-expr" source: "Syntax" message: "has -- need a type: block!")
          word: has
          casts: #(
            spec: [62 10 62 20]
            body: [63 1 63 5]
          )
          resolved: #(
            spec: [62 10 62 20]
          )
        )
      )
      #(
        range: [62 10 62 20]
        expr:
        [
          #(
            range: [62 11 62 15]
            expr: /ref
            depth: 2
            syntax: #(
              name: func-refinement
              error: #(severity: 1 code: "forbidden-refine" source: "Syntax" message: "/ref -- forbidden refinement: /ref")
              args: #(
                types: [
                  [62 16 62 17]
                  [62 18 62 19]
                  [62 18 62 19]
                ]
              )
            )
          )
          #(
            range: [62 16 62 17]
            expr: a
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                refs: [62 11 62 15]
              )
            )
          )
          #(
            range: [62 18 62 19]
            expr: b
            depth: 2
            syntax: #(
              name: func-param
              args: #(
                refs: [62 11 62 15]
              )
            )
          )
        ]
        depth: 1
        syntax: #(
          name: block
          step: 1
        )
      )
      #(
        range: [63 1 63 5]
        expr: fh2:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [63 6 63 9]
        )
      )
      #(
        range: [63 6 63 9]
        expr: has
        depth: 1
        syntax: #(
          name: unknown-keyword
          step: 1
          word: has
        )
      )
      #(
        range: [63 10 63 15]
        expr:
        [
          #(
            range: [63 11 63 12]
            expr: a
            depth: 2
            syntax: #(
              name: none
            )
          )
          #(
            range: [63 13 63 14]
            expr: b
            depth: 2
            syntax: #(
              name: none
            )
          )
        ]
        depth: 1
        syntax: #(
          name: block
          step: 1
        )
      )
      #(
        range: [63 15 63 17]
        expr: []
        depth: 1
        syntax: #(
          name: block
          step: 1
        )
      )
      #(
        range: [65 1 65 3]
        expr: z:
        depth: 1
        syntax: #(
          name: set
          step: 2
          error: #(severity: 1 code: "recursive-define" source: "Syntax" message: "z: -- recursive define")
          cast: [65 4 65 5]
        )
      )
      #(
        range: [65 4 65 5]
        expr: z
        depth: 1
        syntax: #(
          name: unknown
          step: 1
          word: z
        )
      )
      #(
        range: [67 1 67 5]
        expr: blk:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [67 6 67 12]
        )
      )
      #(
        range: [67 6 67 12]
        expr:
        [
          #(
            range: [67 7 67 9]
            expr: a:
            depth: 2
            syntax: #(
              name: none
            )
          )
          #(
            range: [67 10 67 11]
            expr: 1
            depth: 2
            syntax: #(
              name: none
            )
          )
        ]
        depth: 1
        syntax: #(
          name: block
          step: 1
        )
      )
      #(
        range: [68 1 68 5]
        expr: ctx:
        depth: 1
        syntax: #(
          name: set
          step: 2
          cast: [68 6 68 13]
        )
      )
      #(
        range: [68 6 68 13]
        expr: context
        depth: 1
        syntax: #(
          name: keyword-context
          step: 2
          word: context
          casts: #(
            spec: [68 14 70 2]
          )
          resolved: #(
            spec: [68 14 70 2]
          )
        )
      )
      #(
        range: [68 14 70 2]
        expr:
        [
          #(
            range: [69 2 69 4]
            expr: a:
            depth: 2
            syntax: #(
              name: set
              step: 2
              cast: [69 5 69 9]
              refer: [3 1 3 3]
              value: [3 4 3 9]
            )
          )
          #(
            range: [69 5 69 9]
            expr: none
            depth: 2
            syntax: #(
              name: keyword-value
              step: 1
              word: none
            )
          )
        ]
        depth: 1
        syntax: #(
          name: block
          step: 1
          into: true
        )
      )
      #(
        range: [72 1 72 3]
        expr: do
        depth: 1
        syntax: #(
          name: unknown-keyword
          step: 1
          word: do
        )
      )
      #(
        range: [72 4 72 8]
        expr: bind
        depth: 1
        syntax: #(
          name: unknown-keyword
          step: 1
          word: bind
        )
      )
      #(
        range: [72 9 72 12]
        expr: blk
        depth: 1
        syntax: #(
          name: refer
          step: 1
          refer: [67 1 67 5]
          value: [67 6 67 12]
          word: blk
        )
      )
      #(
        range: [72 13 72 16]
        expr: ctx
        depth: 1
        syntax: #(
          name: refer
          step: 1
          refer: [68 1 68 5]
          value: [68 6 68 13]
          word: ctx
        )
      )
    ]
    depth: 0
    max-depth: 6
    syntax: #(
      name: top
      step: 1
      extra: [
        [34 5 34 7]
        [34 10 34 12]
        [9 4 9 7]
        [23 4 23 6]
        [24 4 24 6]
      ]
    )
  )
]
Error/Warning: ---------------------------------------
[#(
    severity: 1
    code: "miss-expr"
    source: "Syntax"
    message: "he: -- need a type: block! for Red File header"
    range: #(
        start: #(
            line: 0
            character: 4
        )
        end: #(
            line: 0
            character: 7
        )
    )
) #(
    severity: 1
    code: "invalid-datatype"
    source: "Syntax"
    message: "test -- invalid datatype: test"
    range: #(
        start: #(
            line: 37
            character: 4
        )
        end: #(
            line: 37
            character: 8
        )
    )
) #(
    severity: 1
    code: "invalid-datatype"
    source: "Syntax"
    message: "test! -- invalid datatype: test!"
    range: #(
        start: #(
            line: 38
            character: 4
        )
        end: #(
            line: 38
            character: 9
        )
    )
) #(
    severity: 1
    code: "invalid-arg"
    source: "Syntax"
    message: "return: -- invalid argument for: c"
    range: #(
        start: #(
            line: 56
            character: 39
        )
        end: #(
            line: 56
            character: 46
        )
    )
) #(
    severity: 1
    code: "double-define"
    source: "Syntax"
    message: "/c -- double define: c"
    range: #(
        start: #(
            line: 56
            character: 71
        )
        end: #(
            line: 56
            character: 73
        )
    )
) #(
    severity: 1
    code: "double-define"
    source: "Syntax"
    message: "a -- double define: a"
    range: #(
        start: #(
            line: 56
            character: 74
        )
        end: #(
            line: 56
            character: 75
        )
    )
) #(
    severity: 1
    code: "miss-expr"
    source: "Syntax"
    message: "has -- need a type: block!"
    range: #(
        start: #(
            line: 61
            character: 5
        )
        end: #(
            line: 61
            character: 8
        )
    )
) #(
    severity: 1
    code: "forbidden-refine"
    source: "Syntax"
    message: "/ref -- forbidden refinement: /ref"
    range: #(
        start: #(
            line: 61
            character: 10
        )
        end: #(
            line: 61
            character: 14
        )
    )
) #(
    severity: 1
    code: "recursive-define"
    source: "Syntax"
    message: "z: -- recursive define"
    range: #(
        start: #(
            line: 64
            character: 0
        )
        end: #(
            line: 64
            character: 2
        )
    )
)]

[
  #(
    range: [10 5 10 8]
    expr: f1:
    depth: 5
    syntax: #(
      name: set
      step: 2
      cast: [10 9 10 15]
    )
  )
  #(
    range: [11 5 11 8]
    expr: f2:
    depth: 5
    syntax: #(
      name: set
      step: 2
      cast: [11 9 11 10]
    )
  )
  #(
    range: [12 5 12 8]
    expr: f3:
    depth: 5
    syntax: #(
      name: set
      step: 2
      cast: [12 9 12 11]
    )
  )
  #(
    range: [13 5 13 8]
    expr: f4:
    depth: 5
    syntax: #(
      name: set
      step: 2
      cast: [13 9 13 10]
    )
  )
  #(
    range: [14 5 14 8]
    expr: f5:
    depth: 5
    syntax: #(
      name: set
      step: 2
      cast: [14 9 14 11]
    )
  )
  #(
    range: [15 5 15 8]
    expr: f6:
    depth: 5
    syntax: #(
      name: set
      step: 2
      cast: [15 9 15 11]
    )
  )
  #(
    range: [16 5 16 8]
    expr: f7:
    depth: 5
    syntax: #(
      name: set
      step: 2
      cast: [16 9 16 10]
    )
  )
  #(
    range: [9 4 9 7]
    expr: ff:
    depth: 4
    syntax: #(
      name: set
      step: 2
      cast: [9 8 9 16]
    )
  )
  #(
    range: [55 1 55 5]
    expr: fff:
    depth: 1
    syntax: #(
      name: set
      step: 2
      cast: [55 6 55 7]
    )
  )
  #(
    range: [57 1 57 4]
    expr: ft:
    depth: 1
    syntax: #(
      name: set
      step: 2
      cast: [57 5 57 9]
    )
  )
  #(
    range: [62 1 62 5]
    expr: fh1:
    depth: 1
    syntax: #(
      name: set
      step: 2
      cast: [62 6 62 9]
    )
  )
  #(
    range: [63 1 63 5]
    expr: fh2:
    depth: 1
    syntax: #(
      name: set
      step: 2
      cast: [63 6 63 9]
    )
  )
]
PS D:\vscode-ext\VScode-extension\server>